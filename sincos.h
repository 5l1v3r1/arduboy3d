#ifndef SINCOS_H_
#define SINCOS_H_

#include <avr/pgmspace.h>

// FIXME: minimize this to 64 uint8_t entries for space optimization
// i don't want to mess with this right now
static const int16_t kSinTbl_[256] PROGMEM = { 0,    6,   12,   18,   25,   31,
  37,   43,   49,   56,   62, 68,   74,   80,   86,   92,   97,  103,  109,
  115,  120,  126, 131,  136,  142,  147,  152,  157,  162,  167,  171,  176,
  181, 185,  189,  193,  197,  201,  205,  209,  212,  216,  219,  222, 225,
  228,  231,  234,  236,  238,  241,  243,  244,  246,  248, 249,  251,  252,
  253,  254,  254,  255,  255,  255,  256,  255, 255,  255,  254,  254,  253,
  252,  251,  249,  248,  246,  244, 243,  241,  238,  236,  234,  231,  228,
  225,  222,  219,  216, 212,  209,  205,  201,  197,  193,  189,  185,  181,
  176,  171, 167,  162,  157,  152,  147,  142,  136,  131,  126,  120,  115,
  109,  103,   97,   92,   86,   80,   74,   68,   62,   56,   49, 43,   37,
  31,   25,   18,   12,    6,    0,   -6,  -12,  -18, -25,  -31,  -37,  -43,
  -49,  -56,  -62,  -68,  -74,  -80,  -86, -92,  -97, -103, -109, -115, -120,
  -126, -131, -136, -142, -147, -152, -157, -162, -167, -171, -176, -181, -185,
  -189, -193, -197, -201, -205, -209, -212, -216, -219, -222, -225, -228, -231,
  -234, -236, -238, -241, -243, -244, -246, -248, -249, -251, -252, -253, -254,
  -254, -255, -255, -255, -256, -255, -255, -255, -254, -254, -253, -252, -251,
  -249, -248, -246, -244, -243, -241, -238, -236, -234, -231, -228, -225, -222,
  -219, -216, -212, -209, -205, -201, -197, -193, -189, -185, -181, -176, -171,
  -167, -162, -157, -152, -147, -142, -136, -131, -126, -120, -115, -109, -103,
  -97,  -92, -86,  -80,  -74,  -68,  -62,  -56,  -49,  -43,  -37,  -31,  -25,
  -18,  -12,   -6
};

static void GetSinCos(uint8_t theta,
    int16_t *sin, int16_t *cos) {
  // TODO: simplify
  *sin = pgm_read_word_near(kSinTbl_ + theta);
  *cos = pgm_read_word_near(kSinTbl_ + ((theta + 64) & 255));
}

#endif  // SINCOS_H_
